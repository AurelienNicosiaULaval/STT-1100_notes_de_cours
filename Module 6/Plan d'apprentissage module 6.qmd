---
title: "Module 6 - Plan d'apprentissage"
subtitle: "STT-1100 Introduction Ã  la science des donnÃ©es"
format:
  html:
    toc: true
    toc-title: Plan
    self-contained: true
    link-external-newwindow: true
#    number-sections: true
    css: [../css/base_css.css]
editor: visual
---

# ğŸ¯ Objectifs du module

Ã€ la fin de ce module, vous devriez Ãªtre capable de :

- Collaborer efficacement sur des projets de science des donnÃ©es en utilisant `GitHub`.
- Assurer la reproductibilitÃ© des analyses avec `Quarto`.
- Fusionner et gÃ©rer plusieurs jeux de donnÃ©es.
- Expliquer le cycle de vie des donnÃ©es et les principes de `DataOps`.

# ğŸ“š Lectures

Dans ce module, nous allons explorer les concepts de base de la collaboration et de la reproductibilitÃ© dans GitHub, ainsi que l'utilisation de Quarto pour crÃ©er des rapports dynamiques. Voici quelques lectures initiales pour vous prÃ©parer :

-   [GitHub Docs â€“ Hello World](https://docs.github.com/en/get-started/quickstart/hello-world) Premier projet complet : dÃ©pÃ´t, branche, pull request puis merge.
-   [GitHub Docs â€“ About pull requests](https://docs.github.com/en/pull-requests) Tout savoir sur la revue de code, les commentaires et la rÃ©solution de conflits.
-   [Quarto Docs â€“ Inline Code](https://quarto.org/docs/computations/inline-code.html) InsÃ©rer du code R directement dans le texte pour afficher dynamiquement des valeurs.
-   [What is DataOps? (DataKitchen)](https://datakitchen.io/what-is-dataops/) Principes fondamentaux de DataOps : automatisation, qualitÃ© et collaboration. :contentReference[oaicite:0]{index="0"}\
-   [R for Data Science (2áµ‰ Ã©d.) â€“ Chapitre 26 : Joins](https://r4ds.hadley.nz/joins.html) Apprendre Ã  combiner des donnÃ©es de diffÃ©rentes sources avec `dplyr`.

# Aventure

[Aventure 6](Aventure/Aventure%206.qmd)

# ğŸ¯ DÃ©fi â€” Revue croisÃ©e des journaux de bord {.unnumbered}

> Chaque Ã©quipe doit **partager son journal de bord** avec une autre Ã©quipe et fournir une **rÃ©troaction constructive**. Cette Ã©tape simule le processus de revue par les pairs et renforce les compÃ©tences de communication critique.

## Ã‰tapes Ã  rÃ©aliser

1. **Attribution des paires** : lâ€™enseignantÂ·e publiera un tableau listant pour chaque Ã©quipe le journal de bord Ã  examiner.
2. **Partage du document** :

   * LeÂ·la responsable du dÃ©pÃ´t ajoute lâ€™Ã©quipe destinataire comme *Collaborator* en lecture/Ã©criture sur GitHub.
   * Lâ€™URL du journal de bord HTML est communiquÃ©.
3. **Revue par les pairs** :

   * Chaque membre de lâ€™Ã©quipe examinatrice ouvre une *Issue* dans le dÃ©pÃ´t de lâ€™Ã©quipe revue et dÃ©pose au moins **un commentaire dÃ©taillÃ©** portant surâ€¯:

     1. **ClartÃ©** du contenu (structure, titres, lisibilitÃ©)
     2. **Rigueur** de la mÃ©thodologie (description des rÃ´les, reproductibilitÃ© du code)
     3. **Pertinence** des rÃ©flexions (cycle de vie des donnÃ©es, leÃ§ons apprises)
   * Les commentaires doivent contenir :

     * Un Ã©noncÃ© dâ€™aspect positif (Â«Â ce qui est rÃ©ussiÂ Â»)
     * Une suggestion dâ€™amÃ©lioration spÃ©cifique (Â«Â ce qui pourrait Ãªtre clarifiÃ©Â Â»)
4. **AccusÃ© de rÃ©ception & rÃ©vision** :

   * Lâ€™Ã©quipe rÃ©ceptrice rÃ©pond Ã  chaque *Issue* et, si jugÃ© nÃ©cessaire, pousse une mise Ã  jour de son journal de bord.

## Livrables

| Ã‰quipe                  | Livrable                                                                          | OÃ¹ le dÃ©poser                  |
| ----------------------- | --------------------------------------------------------------------------------- | ------------------------------ |
| **Ã‰quipe examinatrice** | â‰¥ 3 *Issues* (une par membre) contenant une rÃ©troaction complÃ¨te                  | DÃ©pÃ´t GitHub de lâ€™Ã©quipe revue |
| **Ã‰quipe rÃ©visÃ©e**      | Journal de bord mis Ã  jour (si modifications nÃ©cessaires) + rÃ©ponses aux *Issues* | MÃªme dÃ©pÃ´t GitHub              |

## BarÃ¨me (20â€¯pts)

| CritÃ¨re                                                                     | Pts |
| --------------------------------------------------------------------------- | --- |
| QualitÃ© des commentaires (clartÃ©, constructivitÃ©, exemples)                 | 10  |
| Pertinence des suggestions visâ€‘Ã â€‘vis de la reproductibilitÃ© & collaboration | 5   |
| Suivi et rÃ©ponses de lâ€™Ã©quipe rÃ©visÃ©e                                       | 5   |

---

> ğŸ’¡ **Conseil** : concentrezâ€‘vous sur des rÃ©troactions actionnables (ex. proposer un titre plus descriptif, ajouter un graphique supplÃ©mentaire, prÃ©ciser un paramÃ¨tre YAML) plutÃ´t que des commentaires gÃ©nÃ©riques.


# ğŸ‹ï¸ Exercices de consolidation {.unnumbered}

> **Objectif gÃ©nÃ©ral â€“ MaÃ®triser les diffÃ©rentes jointures `dplyr`
> (`inner_join()`, `left_join()`, `right_join()`, `full_join()`,
> `semi_join()`, `anti_join()`) sur des jeux de donnÃ©es variÃ©s.**

---

## 1. Penguins & Islands

*Jeux de donnÃ©esÂ :* `palmerpenguins::penguins` et `palmerpenguins::penguins_raw` (package **palmerpenguins**).
Ajoute Ã  chaque manchot la latitude (`lat`) et la longitude (`long`) de son Ã®le en faisant correspondre la variable `island`.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(palmerpenguins)

islands <- penguins_raw |>
  distinct(island, lat = latitude, long = longitude)

penguins_loc <- penguins |>
  left_join(islands, by = "island")
```

:::

---

## 2. Gapminder Ã— Code ISO-3

*Jeux de donnÃ©esÂ :* `gapminder::gapminder` (package **gapminder**) et
`countrycode::codelist` (package **countrycode**).
RÃ©cupÃ¨re le code ISOâ€‘3 (`iso3c`) et la rÃ©gion de la FAO pour chaque pays dans `gapminder`.
*IndiceÂ :* clÃ©Â = `country`.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(gapminder)
library(countrycode)

gap_iso <- gapminder |>
  inner_join(
    select(countrycode::codelist, country = country.name.en, iso3c, region_fao),
    by = "country"
  )
```

:::

---

## 3. Star Wars â€“ EspÃ¨ces & Classifications

*Jeu de donnÃ©esÂ :* `dplyr::starwars` (package **dplyr**).
CrÃ©e un tibble `species_class` listant quelques espÃ¨ces et leur **classification** (`mammal`, `reptilian`, etc.).
Fais une **`left_join()`** pour ajouter la colonne `classification` et calcule la taille moyenne (`height`) par classification.

::: {.callout-tip collapse=true}

```r
library(dplyr)

species_class <- tibble::tribble(
  ~species, ~classification,
  "Human",  "mammal",
  "Droid",  "artificial",
  "Gungan", "amphibian",
  "Wookiee","mammal"
)

starwars_cls <- starwars |>
  left_join(species_class, by = "species") |>
  group_by(classification) |>
  summarise(mean_height = mean(height, na.rm = TRUE))
```

:::

---

## 4. Baseball â€“ Joueurs canadiens

*Jeux de donnÃ©esÂ :* `Lahman::People`, `Lahman::Batting` (package **Lahman**).

1. Obtiens la liste des joueurs nÃ©s au *Canada* (`birthCountry`).
2. Calcule leur moyenne au bÃ¢ton (`H/AB`) en fusionnant People â†” Batting sur `playerID`.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(Lahman)

can_players <- People |>
  filter(birthCountry == "Canada") |>
  select(playerID, nameFirst, nameLast)

can_stats <- can_players |>
  inner_join(select(Batting, playerID, H, AB), by = "playerID") |>
  group_by(playerID, nameFirst, nameLast) |>
  summarise(avg = sum(H, na.rm = TRUE) / sum(AB, na.rm = TRUE),
            .groups = "drop")
```

:::

---

## 5. PrÃ©noms & PremiÃ¨re lettre

*Jeu de donnÃ©esÂ :* `babynames::babynames` (package **babynames**).
CrÃ©e un tibble `alphabet` comportant la premiÃ¨re lettre (`initial`) et sa catÃ©gorie (Â«Â Aâ€‘MÂ Â», Â«Â Nâ€‘ZÂ Â»).
Ajoute la catÃ©gorie Ã  `babynames`, puis compte les naissances par catÃ©gorie en 2010.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(babynames)

alphabet <- tibble::tibble(
  initial = LETTERS,
  group   = if_else(initial <= "M", "A-M", "N-Z")
)

babynames_2010 <- babynames |>
  filter(year == 2010) |>
  mutate(initial = substr(name, 1, 1)) |>
  inner_join(alphabet, by = "initial") |>
  group_by(group) |>
  summarise(total = sum(n))
```

:::

---

## 6. MÃ©tÃ©o canadienne â€“ Stations & Observations

*Jeux de donnÃ©esÂ :* `weathercan::stations_meta()` et `weathercan::weather_dl()` (package **weathercan**).
TÃ©lÃ©charge les donnÃ©es quotidiennes de QuÃ©becâ€‘Jeanâ€‘Lesage (station #7025250) pour 2024 et joinsâ€‘les aux mÃ©tadonnÃ©es de station pour ajouter `province` et `elevation`.

::: {.callout-tip collapse=true}

```r
library(weathercan)
library(dplyr)

meta <- stations_meta() |>
  filter(station_id == 7025250) |>
  select(station_id, province, elev = elevation)

qc24 <- weather_dl(station_ids = 7025250,
                   start = "2024-01-01", end = "2024-12-31",
                   interval = "day")

qc24_full <- qc24 |>
  left_join(meta, by = "station_id")
```

:::

---

## 7. PizzaÂ Ratings

*Jeux de donnÃ©esÂ :* `fivethirtyeight::pizza` et `fivethirtyeight::pizza_places` (package **fivethirtyeight**).
Associe chaque Ã©valuation (`pizza`) Ã  son restaurant (`pizza_places`) via `place_id` et trouve la note moyenne (`rating`) par **state**.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(fivethirtyeight)

pizza_avg_state <- pizza |>
  inner_join(pizza_places, by = "place_id") |>
  group_by(state) |>
  summarise(mean_rating = mean(rating, na.rm = TRUE))
```

:::

---

## 8. ONU â€“ Votes & RÃ©solutions

*Jeux de donnÃ©esÂ :* `unvotes::un_votes`, `unvotes::un_roll_calls` (package **unvotes**).
Relie chaque vote (`un_votes`) Ã  la description de la rÃ©solution (`un_roll_calls`) via `rcid`.
Ã‰numÃ¨re les cinq pays ayant votÃ© le plus souvent Â«Â noÂ Â» entre 2000 et 2010.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(unvotes)

votes_desc <- un_votes |>
  inner_join(un_roll_calls, by = "rcid") |>
  filter(year >= 2000, year <= 2010, vote == "no") |>
  count(country, sort = TRUE) |>
  slice_head(n = 5)
```

:::

---

## 9. Films & Oscars

*Jeux de donnÃ©esÂ :* `ggplot2movies::movies` (package **ggplot2movies**) et un tibble `oscars` listant quelques titres et lâ€™annÃ©e de lâ€™Oscar du meilleur film.
Fais une **`full_join()`** puis repÃ¨re les films prÃ©sents dans un seul des deux ensembles.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(ggplot2movies)

oscars <- tibble::tribble(
  ~title,            ~oscar_year,
  "The Hurt Locker", 2010,
  "Argo",            2013,
  "Parasite",        2020,
  "Nomadland",       2021
)

movies_oscar <- full_join(
  select(movies, title, year, rating),
  oscars,
  by = "title",
  keep = TRUE
)

only_one_side <- movies_oscar |>
  filter(is.na(year) | is.na(oscar_year))
```

:::

---

## 10. **Mini-projet EDA** â€” Incendies de forÃªt

*Jeux de donnÃ©esÂ :* `fires::fires` et `fires::fire_weather` (package **fires**).

1. **Joins :** relie `fires` (incidents) et `fire_weather` (conditions mÃ©tÃ©o) via `fid`.
2. Calcule lâ€™impact moyen de la tempÃ©rature (`temp`) et du vent (`wind`) sur la superficie brÃ»lÃ©e (`area`).
3. Visualise `temp` Ã— `area` avec un nuage de points et une droite de rÃ©gression.

::: {.callout-tip collapse=true}

```r
library(dplyr)
library(ggplot2)
library(fires)

fires_full <- fires |>
  inner_join(fire_weather, by = "fid")

summary_tbl <- fires_full |>
  summarise(
    mean_area = mean(area, na.rm = TRUE),
    corr_temp = cor(temp, area, use = "complete.obs"),
    corr_wind = cor(wind, area, use = "complete.obs")
  )

```
 
